<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/6.1.4/adapter.min.js"
      integrity="sha512-FZkQmTcqSzV2aNpWszYA/pPUISx6QjI60lKGwnIsfNFCGqUB7gcobQ9StH3hQCKFN92md3fCaXLzzSpoFat57A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script> -->
    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div
      class="container w-75 bg-light mt-5 text-black p-3 rounded shadow"
      style="height: 70vh"
    >
      QR Scanner

      <div class="d-flex gap-3 mt-3">
        <!-- camera -->
        <div class="bg-primary p-3 rounded w-50">
          <video
            autoplay="true"
            id="preview"
            width="100%"
            height="100%"
          ></video>
        </div>

        <!-- output -->
        <div class="shadow p-3 rounded w-50">
          <input
            type="text"
            name="qrcode"
            id="qrcode"
            placeholder="QR code"
            class="form-control"
          />
        </div>
      </div>
    </div>
  </body>

  <script>
    let scanner = new Instascan.Scanner({
      video: document.getElementById("preview"),
    });

    Instascan.Camera.getCameras()
      .then(function (cameras) {
        if (cameras.length > 0) {
          scanner.start(cameras[0]);
        } else {
          alert("No cameras found");
        }
      })
      .catch(function (e) {
        console.error(e);
      });

    scanner.addListener("scan", function (c) {
      document.getElementById("qrcode").value = c;
    });
  </script>
</html>
